webpackJsonp([18],{INtn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{dataKey:!1,queryInfo:{query:"",page:1,page_size:10},addUnitVisible:!1,editUnitVisible:!1,total:0,unitList:[{id:0,version:"",facility_name:"",price:0,buyer:0}],userInfo:[{id:0,username:""}],addUnitForm:{version:"",facility_name:"",price:0,buyer:0},editUnitForm:{version:"",facility_name:"",price:0,buyer:0},addUnitFormRul:{version:[{required:!0,message:"请输入设备型号",trigger:"blur"}],facility_name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],buyer:[{required:!0,message:"请输入购买人",trigger:"blur"}]}}},mounted:function(){this.getUnitList(),this.getUserList()},methods:{getUnitList:function(){var t=this;this.$axios.get(this.api+"/unit/list",{params:this.queryInfo}).then(function(e){console.log(e.data),t.unitList=e.data.list,t.total=e.data.pagination.total,t.dataKey=!t.dataKey,console.log(t.unitList[1].buyer.username)})},getUserList:function(){var t=this;this.$axios.get(this.api+"/user/list",{params:{page_size:1e6}}).then(function(e){t.userInfo=e.data.list})},sizeChange:function(t){this.queryInfo.page_size=t,console.log(this.queryInfo),console.log("page"),this.getUnitList()},currentChange:function(t){this.queryInfo.page=t,console.log(this.queryInfo),console.log("page_sie"),this.getUnitList()},addUnitInfo:function(){var t=this;this.$refs.addUnitFormRef.validate(function(e){if(!e)return alert("请输入正确的信息");t.$axios.post(t.api+"/unit/create",t.addUnitForm).then(function(e){t.getUnitList()})}),this.addUnitVisible=!this.addUnitVisible},editUnit:function(t){this.editUnitForm=t,this.editUnitForm.buyer=t.buyer.id,this.editUnitVisible=!0},editUnitInfo:function(){var t=this;this.$refs.addUnitFormRef.validate(function(e){if(!e)return alert("请输入正确的信息");t.$axios.put(t.api+"/unit/update",t.editUnitForm).then(function(e){t.getUnitList(),console.log(e)})}),this.editUnitVisible=!this.editUnitVisible}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),i("el-breadcrumb-item",[t._v("资产管理")]),t._v(" "),i("el-breadcrumb-item",[t._v("设备管理")])],1),t._v(" "),i("el-card",[i("el-row",{attrs:{gutter:14}},[i("el-col",{attrs:{span:6}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.getUnitList},model:{value:t.queryInfo.query,callback:function(e){t.$set(t.queryInfo,"query",e)},expression:"queryInfo.query"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getUnitList},slot:"append"})],1)],1),t._v(" "),i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addUnitVisible=!t.addUnitVisible}}},[t._v("添加设备")])],1)],1),t._v(" "),i("el-table",{key:t.dataKey,staticStyle:{width:"100%"},attrs:{data:t.unitList,height:"100%",border:""}},[i("el-table-column",{attrs:{type:"index",label:"编号",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"version",label:"型号",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"facility_name",label:"名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"price",label:"价格"}}),t._v(" "),i("el-table-column",{attrs:{prop:"buyer.username",label:"购买人"}}),t._v(" "),i("el-table-column",{attrs:{prop:"buy_time",label:"购买时间"}}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑信息",placement:"top"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return t.editUnit(e.row)}}})],1)]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.queryInfo.page,"page-sizes":[1,10,20,50],"page-size":t.queryInfo.page_size,layout:"prev, pager, next, sizes, total",total:t.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange,"update:currentPage":function(e){return t.$set(t.queryInfo,"page",e)},"update:current-page":function(e){return t.$set(t.queryInfo,"page",e)}}})],1),t._v(" "),i("el-dialog",{attrs:{title:"修改员工信息",visible:t.addUnitVisible,width:"50%",align:"left"},on:{"update:visible":function(e){t.addUnitVisible=e}}},[i("el-form",{ref:"addUnitFormRef",staticClass:"demo-ruleForm",attrs:{model:t.addUnitForm,rules:t.addUnitFormRul,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"型号",prop:"version"}},[i("el-input",{model:{value:t.addUnitForm.version,callback:function(e){t.$set(t.addUnitForm,"version",e)},expression:"addUnitForm.version"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"名称",prop:"facility_name"}},[i("el-input",{model:{value:t.addUnitForm.facility_name,callback:function(e){t.$set(t.addUnitForm,"facility_name",e)},expression:"addUnitForm.facility_name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"价格",prop:"price"}},[i("el-input",{model:{value:t.addUnitForm.price,callback:function(e){t.$set(t.addUnitForm,"price",e)},expression:"addUnitForm.price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"购买人",prop:"buyer"}},[i("el-select",{attrs:{placeholder:"选择用户"},model:{value:t.addUnitForm.buyer,callback:function(e){t.$set(t.addUnitForm,"buyer",e)},expression:"addUnitForm.buyer"}},t._l(t.userInfo,function(t){return i("el-option",{key:t.id,attrs:{label:t.username,value:t.id}})}),1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addUnitVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.addUnitInfo}},[t._v("更新")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"修改员工信息",visible:t.editUnitVisible,width:"50%",align:"left"},on:{"update:visible":function(e){t.editUnitVisible=e}}},[i("el-form",{ref:"addUnitFormRef",staticClass:"demo-ruleForm",attrs:{model:t.editUnitForm,rules:t.addUnitFormRul,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"型号",prop:"version"}},[i("el-input",{model:{value:t.editUnitForm.version,callback:function(e){t.$set(t.editUnitForm,"version",e)},expression:"editUnitForm.version"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"名称",prop:"facility_name"}},[i("el-input",{model:{value:t.editUnitForm.facility_name,callback:function(e){t.$set(t.editUnitForm,"facility_name",e)},expression:"editUnitForm.facility_name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"价格",prop:"price"}},[i("el-input",{model:{value:t.editUnitForm.price,callback:function(e){t.$set(t.editUnitForm,"price",e)},expression:"editUnitForm.price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"购买人",prop:"buyer"}},[i("el-select",{attrs:{placeholder:"选择用户"},model:{value:t.editUnitForm.buyer,callback:function(e){t.$set(t.editUnitForm,"buyer",e)},expression:"editUnitForm.buyer"}},t._l(t.userInfo,function(t){return i("el-option",{key:t.id,attrs:{label:t.username,value:t.id}})}),1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editUnitVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.editUnitInfo}},[t._v("更新")])],1)],1)],1)},staticRenderFns:[]},a=i("VU/8")(n,r,!1,null,null,null);e.default=a.exports}});
//# sourceMappingURL=18.3dd9c94f083f1634a704.js.map