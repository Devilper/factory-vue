webpackJsonp([5],{L03h:function(e,t){},m1FT:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{dataKey:!1,queryInfo:{query:"",page:1,page_size:10},addMenuVisible:!1,editMenuVisible:!1,menuList:[{id:0,desc:"",title:"",p_id:[]}],total:0,addMenuForm:{icon:"",id:0,position:"",title:""},editMenuForm:{icon:"",id:0,position:"",title:""},addMenuFormRul:{title:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],desc:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:2,max:200,message:"长度在 2 到 200 个字符",trigger:"blur"}]},menuLevelInfo:[{id:1,title:"1级菜单"},{id:2,title:"2级菜单"},{id:3,title:"3级菜单"}]}},mounted:function(){this.getMenuList()},methods:{getMenuList:function(){var e=this;this.$axios.get(this.api+"/menu/list",{params:this.queryInfo}).then(function(t){console.log(t.data),e.menuList=t.data.list,e.total=t.data.pagination.total,e.dataKey=!e.dataKey})},sizeChange:function(e){this.queryInfo.page_size=e,this.getMenuList()},currentChange:function(e){this.queryInfo.page=e,this.getMenuList()},addMenu:function(){var e=this;this.$refs.addMenuFormRef.validate(function(t){if(!t)return alert("请输入正确的信息");e.$axios.post(e.api+"/menu/create",e.addMenuForm).then(function(e){})}),this.getMenuList(),this.addMenuVisible=!this.addMenuVisible,console.log("creare")},editMenu:function(e){this.editMenuVisible=!0,this.editMenuForm=e},deleteMenu:function(e){var t=this;this.$axios.delete(this.api+"/menu/delete",{params:{r_id:e.id}}).then(function(e){t.getMenuList()})},editMenuInfo:function(){console.log(this.editMenuForm),this.$axios.put(this.api+"/menu/update",this.editMenuForm).then(function(e){console.log(e)}),this.getMenuList(),this.editMenuVisible=!1},create:function(){this.getMenuList()},getHeight:function(){var e=this;this.$nextTick(function(){var t=e.$refs.qualityInput.offsetHeight;e.tableHeight=window.innerHeight-220-t})}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),i("el-breadcrumb-item",[e._v("菜单列表")])],1),e._v(" "),i("el-card",{staticClass:"card"},[i("el-row",{attrs:{gutter:14}},[i("el-col",{attrs:{span:6}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getMenuList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getMenuList},slot:"append"})],1)],1),e._v(" "),i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addMenuVisible=!e.addMenuVisible}}},[e._v("添加菜单")])],1)],1),e._v(" "),i("el-table",{key:e.dataKey,ref:"qualityData",staticStyle:{width:"100%"},attrs:{data:e.menuList,height:"100%",border:"","max-height":"tableHeights"}},[i("el-table-column",{attrs:{type:"index",label:"编号",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"title",label:"菜单",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑信息",placement:"top"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.editMenu(t.row)}}})],1)]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":[1,10,20,50],"page-size":e.queryInfo.page_size,layout:"prev, pager, next, sizes, total",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange,"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)}}})],1),e._v(" "),i("el-dialog",{attrs:{title:"添加菜单",visible:e.addMenuVisible,width:"50%",align:"left"},on:{"update:visible":function(t){e.addMenuVisible=t}}},[i("el-form",{ref:"addMenuFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addMenuForm,rules:e.addMenuFormRul,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"菜单",prop:"title"}},[i("el-input",{model:{value:e.addMenuForm.title,callback:function(t){e.$set(e.addMenuForm,"title",t)},expression:"addMenuForm.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"icon",prop:"icon"}},[i("el-input",{model:{value:e.addMenuForm.icon,callback:function(t){e.$set(e.addMenuForm,"icon",t)},expression:"addMenuForm.icon"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"菜单级别",prop:"position"}},[i("el-select",{attrs:{placeholder:"选择菜单级别"},model:{value:e.addMenuForm.position,callback:function(t){e.$set(e.addMenuForm,"position",t)},expression:"addMenuForm.position"}},e._l(e.menuLevelInfo,function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addMenuVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.addMenu}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"修改菜单",visible:e.editMenuVisible,width:"50%",align:"left"},on:{"update:visible":function(t){e.editMenuVisible=t}}},[i("el-form",{ref:"addMenuFormRef",staticClass:"demo-ruleForm",attrs:{model:e.editMenuForm,rules:e.addMenuFormRul,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"菜单",prop:"title"}},[i("el-input",{model:{value:e.editMenuForm.title,callback:function(t){e.$set(e.editMenuForm,"title",t)},expression:"editMenuForm.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"icon",prop:"icon"}},[i("el-input",{model:{value:e.editMenuForm.icon,callback:function(t){e.$set(e.editMenuForm,"icon",t)},expression:"editMenuForm.icon"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"菜单级别",prop:"position"}},[i("el-select",{attrs:{placeholder:"选择菜单级别"},model:{value:e.editMenuForm.position,callback:function(t){e.$set(e.editMenuForm,"position",t)},expression:"editMenuForm.position"}},e._l(e.menuLevelInfo,function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editMenuVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editMenuInfo}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var a=i("VU/8")(n,o,!1,function(e){i("L03h")},"data-v-5509a126",null);t.default=a.exports}});
//# sourceMappingURL=5.77e9bd2e4dc73141d2cd.js.map