webpackJsonp([7],{"79wm":function(e,t){},qYXW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{dialogDisable:!1,value:!1,dataKey:!1,switchDisable:!1,queryInfo:{good_name:"",status:"",page:1,page_size:10},statusInfo:[{value:"--",label:0},{value:"编辑",label:1},{value:"审核",label:2},{value:"采购",label:3}],addPurchaseVisible:!1,editPurchaseVisible:!1,isA:!0,isP:!1,PurchaseList:[{id:0,apply_date:"",apply_staff_name:{},buyer_date:"",buyer_name:{},good_name:{},good_num:"",good_version:"",price:"",sanction_date:"",sanction_staff_name:{},status:0,total_price:"",unit:""}],total:0,addPurchaseForm:{id:0,good_name:"",good_version:"",good_num:"",price:"",total_price:"",unit:"",status:0},editPurchaseForm:{id:0,good_name:"",good_version:"",good_num:"",price:"",total_price:"",unit:"",status:0},addPurchaseFormRul:{title:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],desc:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:2,max:200,message:"长度在 2 到 200 个字符",trigger:"blur"}]},goodInfo:[{id:1,good_name:""}]}},mounted:function(){this.getPurchaseList(),this.getGoodList()},methods:{changeEdit:function(){this.dialogDisable=!this.value},getGoodList:function(){var e=this;this.$axios.get(this.api+"/good/list").then(function(t){e.goodInfo=t.data.list})},getPurchaseList:function(){var e=this;""===this.queryInfo.status&&(this.queryInfo.status=0),this.$axios.get(this.api+"/purchase/list",{params:this.queryInfo}).then(function(t){e.PurchaseList=t.data.list,e.total=t.data.pagination.total,e.dataKey=!e.dataKey,console.log(e.PurchaseList[0].status)})},sizeChange:function(e){this.queryInfo.page_size=e,this.getPurchaseList()},currentChange:function(e){this.queryInfo.page=e,this.getPurchaseList()},addPurchase:function(){var e=this;this.$refs.addPurchaseFormRef.validate(function(t){if(!t)return alert("请输入正确的信息");e.$axios.post(e.api+"/purchase/create",e.addPurchaseForm).then(function(t){e.getPurchaseList()})}),this.addPurchaseVisible=!this.addPurchaseVisible},editPurchase:function(e){this.editPurchaseVisible=!0,this.dialogDisable=!0,this.value=!1,this.editPurchaseForm=e,console.log(this.editPurchaseForm),2==this.editPurchaseForm.status?this.switchDisable=!0:3==this.editPurchaseForm.status?this.switchDisable=!0:this.switchDisable=!1},editPurchaseInfo:function(){var e=this;this.$axios.put(this.api+"/purchase/update",this.editPurchaseForm).then(function(t){e.getPurchaseList()}),this.editPurchaseVisible=!1,this.dialogDisable=!1},auditPurchase:function(e){var t=this;this.$axios.get(this.api+"/purchase/audit",{params:{id:e.id}}).then(function(e){t.getPurchaseList()})},purchasePurchase:function(e){var t=this;this.$axios.get(this.api+"/purchase/purchase",{params:{id:e.id}}).then(function(e){t.getPurchaseList()})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("仓库管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("采购列表")])],1),e._v(" "),a("el-card",[a("el-row",{attrs:{gutter:14}},[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.queryInfo.status,callback:function(t){e.$set(e.queryInfo,"status",t)},expression:"queryInfo.status"}},e._l(e.statusInfo,function(e){return a("el-option",{key:e.label,attrs:{label:e.value,value:e.label}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getPurchaseList},model:{value:e.queryInfo.good_name,callback:function(t){e.$set(e.queryInfo,"good_name",t)},expression:"queryInfo.good_name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getPurchaseList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addPurchaseVisible=!e.addPurchaseVisible}}},[e._v("添加采购单")])],1)],1),e._v(" "),a("el-table",{key:e.dataKey,staticStyle:{width:"100%"},attrs:{data:e.PurchaseList,height:"100%",border:""}},[a("el-table-column",{attrs:{type:"index",label:"编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"good_name.good_name",label:"原料",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"good_version",label:"型号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"good_num",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"total_price",label:"总价"}}),e._v(" "),a("el-table-column",{attrs:{prop:"apply_date",label:"申请时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"apply_staff_name.username",label:"申请人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.editPurchase(t.row)}}})],1),e._v(" "),1==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核",placement:"top"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-s-claim",size:"mini"},on:{click:function(a){return e.auditPurchase(t.row)}}})],1):e._e(),e._v(" "),2==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"采购",placement:"top"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-s-order",size:"mini"},on:{click:function(a){return e.purchasePurchase(t.row)}}})],1):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":[1,10,20,50],"page-size":e.queryInfo.page_size,layout:"prev, pager, next, sizes, total",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange,"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加采购单",visible:e.addPurchaseVisible,width:"50%",align:"left"},on:{"update:visible":function(t){e.addPurchaseVisible=t}}},[a("el-form",{ref:"addPurchaseFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addPurchaseForm,rules:e.addPurchaseFormRul,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品",prop:"good_name"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择产品"},model:{value:e.addPurchaseForm.good_name,callback:function(t){e.$set(e.addPurchaseForm,"good_name",t)},expression:"addPurchaseForm.good_name"}},e._l(e.goodInfo,function(e){return a("el-option",{key:e.id,attrs:{label:e.good_name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"型号",prop:"good_version"}},[a("el-input",{model:{value:e.addPurchaseForm.good_version,callback:function(t){e.$set(e.addPurchaseForm,"good_version",t)},expression:"addPurchaseForm.good_version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"采购数量",prop:"good_num"}},[a("el-input",{model:{value:e.addPurchaseForm.good_num,callback:function(t){e.$set(e.addPurchaseForm,"good_num",t)},expression:"addPurchaseForm.good_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位",prop:"unit"}},[a("el-input",{model:{value:e.addPurchaseForm.unit,callback:function(t){e.$set(e.addPurchaseForm,"unit",t)},expression:"addPurchaseForm.unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{model:{value:e.addPurchaseForm.price,callback:function(t){e.$set(e.addPurchaseForm,"price",t)},expression:"addPurchaseForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总价",prop:"total_price"}},[a("el-input",{model:{value:e.addPurchaseForm.total_price,callback:function(t){e.$set(e.addPurchaseForm,"total_price",t)},expression:"addPurchaseForm.total_price"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addPurchaseVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addPurchase}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改角色",visible:e.editPurchaseVisible,width:"50%",align:"left"},on:{"update:visible":function(t){e.editPurchaseVisible=t}}},[a("span",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("el-switch",{attrs:{disabled:e.switchDisable},on:{change:e.changeEdit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),a("el-form",{ref:"addPurchaseFormRef",staticClass:"demo-ruleForm",attrs:{model:e.editPurchaseForm,rules:e.addPurchaseFormRul,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品",prop:"good_name"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择产品",disabled:e.dialogDisable},model:{value:e.editPurchaseForm.good_name,callback:function(t){e.$set(e.editPurchaseForm,"good_name",t)},expression:"editPurchaseForm.good_name"}},e._l(e.goodInfo,function(e){return a("el-option",{key:e.id,attrs:{label:e.good_name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"型号",prop:"good_version"}},[a("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editPurchaseForm.good_version,callback:function(t){e.$set(e.editPurchaseForm,"good_version",t)},expression:"editPurchaseForm.good_version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"采购数量",prop:"good_num"}},[a("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editPurchaseForm.good_num,callback:function(t){e.$set(e.editPurchaseForm,"good_num",t)},expression:"editPurchaseForm.good_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位",prop:"unit"}},[a("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editPurchaseForm.unit,callback:function(t){e.$set(e.editPurchaseForm,"unit",t)},expression:"editPurchaseForm.unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editPurchaseForm.price,callback:function(t){e.$set(e.editPurchaseForm,"price",t)},expression:"editPurchaseForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总价",prop:"total_price"}},[a("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editPurchaseForm.total_price,callback:function(t){e.$set(e.editPurchaseForm,"total_price",t)},expression:"editPurchaseForm.total_price"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editPurchaseVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.dialogDisable},on:{click:e.editPurchaseInfo}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(o,s,!1,function(e){a("79wm")},"data-v-3194be14",null);t.default=i.exports}});
//# sourceMappingURL=7.92ff28a9a8dd20def2e9.js.map