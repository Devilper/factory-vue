webpackJsonp([5],{"4L7T":function(e,t){},frC7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{dialogDisable:!1,value:!1,dataKey:!1,switchDisable:!1,queryInfo:{staff_name:"",product_name:"",page:1,page_size:10},userInfo:[{id:0,username:""}],addProduceVisible:!1,editProduceVisible:!1,isA:!0,isP:!1,ProduceList:[{id:0,current_time:"",product_name:{},qualified_num:0,staff_name:{},status:0,today_done_num:0,unit:""}],total:0,addProduceForm:{id:0,staff_name:"",product_name:"",today_done_num:0,qualified_num:0,unit:""},editProduceForm:{id:0,staff_name:"",product_name:"",today_done_num:"",qualified_num:"",unit:"",status:0},addProduceFormRul:{title:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],desc:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:2,max:200,message:"长度在 2 到 200 个字符",trigger:"blur"}]},productInfo:[{id:1,product_name:""}]}},mounted:function(){this.getProduceList(),this.getProductList(),this.getUserList()},methods:{getUserList:function(){var e=this;this.$axios.get(this.api+"/user/list",{params:{page_size:1e6}}).then(function(t){e.userInfo=t.data.list})},changeEdit:function(){this.dialogDisable=!this.value},getProductList:function(){var e=this;this.$axios.get(this.api+"/product/list").then(function(t){e.productInfo=t.data.list})},getProduceList:function(){var e=this;this.$axios.get(this.api+"/produce/list",{params:this.queryInfo}).then(function(t){e.ProduceList=t.data.list,e.total=t.data.pagination.total,e.dataKey=!e.dataKey})},sizeChange:function(e){this.queryInfo.page_size=e,this.getProduceList()},currentChange:function(e){this.queryInfo.page=e,this.getProduceList()},addProduce:function(){var e=this;this.$refs.addProduceFormRef.validate(function(t){if(!t)return alert("请输入正确的信息");e.$axios.post(e.api+"/produce/create",e.addProduceForm).then(function(t){e.getProduceList()})}),this.addProduceVisible=!this.addProduceVisible},editProduce:function(e){this.editProduceVisible=!0,this.dialogDisable=!0,this.value=!1,this.editProduceForm=e,console.log(this.editProduceForm.status),2==this.editProduceForm.status?this.switchDisable=!0:(console.log("sss"),this.switchDisable=!1)},editProduceInfo:function(){var e=this;this.$axios.put(this.api+"/produce/update",this.editProduceForm).then(function(t){e.getProduceList()}),this.editProduceVisible=!1,this.dialogDisable=!1},auditProduce:function(e){var t=this;this.$axios.get(this.api+"/produce/confirm",{params:{id:e.id}}).then(function(e){t.getProduceList()})},produceProduce:function(e){var t=this;this.$axios.get(this.api+"/produce/produce",{params:{id:e.id}}).then(function(e){t.getProduceList()})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("仓库管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("生产列表")])],1),e._v(" "),a("el-card",[a("el-row",{attrs:{gutter:14}},[a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择员工"},model:{value:e.queryInfo.staff_name,callback:function(t){e.$set(e.queryInfo,"staff_name",t)},expression:"queryInfo.staff_name"}},e._l(e.userInfo,function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.username}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择产品"},model:{value:e.queryInfo.product_name,callback:function(t){e.$set(e.queryInfo,"product_name",t)},expression:"queryInfo.product_name"}},e._l(e.productInfo,function(e){return a("el-option",{key:e.id,attrs:{label:e.product_name,value:e.product_name}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:e.getProduceList}},[e._v("搜索")])],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addProduceVisible=!e.addProduceVisible}}},[e._v("添加生产单")])],1)],1),e._v(" "),a("el-table",{key:e.dataKey,staticStyle:{width:"100%"},attrs:{data:e.ProduceList,height:"100%",border:""}},[a("el-table-column",{attrs:{type:"index",label:"编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"product_name.product_name",label:"产品",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"today_done_num",label:"产量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualified_num",label:"合格量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"staff_name.username",label:"员工"}}),e._v(" "),a("el-table-column",{attrs:{prop:"current_time",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.editProduce(t.row)}}})],1),e._v(" "),1==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"确认",placement:"top"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-s-claim",size:"mini"},on:{click:function(a){return e.auditProduce(t.row)}}})],1):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":[1,10,20,50],"page-size":e.queryInfo.page_size,layout:"prev, pager, next, sizes, total",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange,"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加生产单",visible:e.addProduceVisible,width:"50%",align:"left"},on:{"update:visible":function(t){e.addProduceVisible=t}}},[a("el-form",{ref:"addProduceFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addProduceForm,rules:e.addProduceFormRul,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品",prop:"product_name"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择产品"},model:{value:e.addProduceForm.product_name,callback:function(t){e.$set(e.addProduceForm,"product_name",t)},expression:"addProduceForm.product_name"}},e._l(e.productInfo,function(e){return a("el-option",{key:e.id,attrs:{label:e.product_name,value:e.product_name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"今日产量",prop:"today_done_num"}},[a("el-input",{model:{value:e.addProduceForm.today_done_num,callback:function(t){e.$set(e.addProduceForm,"today_done_num",t)},expression:"addProduceForm.today_done_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"合格量",prop:"qualified_num"}},[a("el-input",{model:{value:e.addProduceForm.qualified_num,callback:function(t){e.$set(e.addProduceForm,"qualified_num",t)},expression:"addProduceForm.qualified_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位",prop:"unit"}},[a("el-input",{model:{value:e.addProduceForm.unit,callback:function(t){e.$set(e.addProduceForm,"unit",t)},expression:"addProduceForm.unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"员工",prop:"staff_name"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择员工"},model:{value:e.addProduceForm.staff_name,callback:function(t){e.$set(e.addProduceForm,"staff_name",t)},expression:"addProduceForm.staff_name"}},e._l(e.userInfo,function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.username}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addProduceVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addProduce}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改生产单",visible:e.editProduceVisible,width:"50%",align:"left"},on:{"update:visible":function(t){e.editProduceVisible=t}}},[a("span",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("el-switch",{attrs:{disabled:e.switchDisable},on:{change:e.changeEdit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),a("el-form",{ref:"addProduceFormRef",staticClass:"demo-ruleForm",attrs:{model:e.editProduceForm,rules:e.addProduceFormRul,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品",prop:"product_name"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择产品",disabled:e.dialogDisable},model:{value:e.editProduceForm.product_name,callback:function(t){e.$set(e.editProduceForm,"product_name",t)},expression:"editProduceForm.product_name"}},e._l(e.productInfo,function(e){return a("el-option",{key:e.id,attrs:{label:e.product_name,value:e.product_name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"今日产量",prop:"today_done_num"}},[a("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editProduceForm.today_done_num,callback:function(t){e.$set(e.editProduceForm,"today_done_num",t)},expression:"editProduceForm.today_done_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"合格量",prop:"qualified_num"}},[a("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editProduceForm.qualified_num,callback:function(t){e.$set(e.editProduceForm,"qualified_num",t)},expression:"editProduceForm.qualified_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位",prop:"unit"}},[a("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editProduceForm.unit,callback:function(t){e.$set(e.editProduceForm,"unit",t)},expression:"editProduceForm.unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"员工",prop:"staff_name"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择员工",disabled:e.dialogDisable},model:{value:e.editProduceForm.staff_name,callback:function(t){e.$set(e.editProduceForm,"staff_name",t)},expression:"editProduceForm.staff_name"}},e._l(e.userInfo,function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.username}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editProduceVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.dialogDisable},on:{click:e.editProduceInfo}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(o,r,!1,function(e){a("4L7T")},"data-v-5895501a",null);t.default=i.exports}});
//# sourceMappingURL=5.fa0cfd0c1526688aaac4.js.map