webpackJsonp([8],{NXVk:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{dialogDisable:!1,value:!1,dataKey:!1,switchDisable:!1,queryInfo:{staff_name:"",product_name:"",page:1,page_size:10},userInfo:[{id:0,username:""}],addProduceVisible:!1,editOrderVisible:!1,isA:!0,isP:!1,OrderList:[{id:0,order_name:{product_name:"产品一号"},order_client:"1号客户",order_number:100,order_price:10,order_total_price:1e3,order_time:"2022-04-01",status:"下单"}],total:0,addProduceForm:{id:0,staff_name:"",product_name:"",today_done_num:0,qualified_num:0,unit:""},editOrderForm:{id:0,staff_name:"",product_name:"",today_done_num:"",qualified_num:"",unit:"",status:0},addProduceFormRul:{title:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],desc:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:2,max:200,message:"长度在 2 到 200 个字符",trigger:"blur"}]},productInfo:[{id:1,product_name:""}]}},mounted:function(){this.getOrderList()},methods:{changeEdit:function(){this.dialogDisable=!this.value},getProductList:function(){var e=this;this.$axios.get(this.api+"/product/list").then(function(t){e.productInfo=t.data.list})},getOrderList:function(){var e=this;this.$axios.get(this.api+"/produce/list",{params:this.queryInfo}).then(function(t){e.OrderList=t.data.list,e.total=t.data.pagination.total,e.dataKey=!e.dataKey})},sizeChange:function(e){this.queryInfo.page_size=e,this.getOrderList()},currentChange:function(e){this.queryInfo.page=e,this.getOrderList()},addProduce:function(){var e=this;this.$refs.addProduceFormRef.validate(function(t){if(!t)return alert("请输入正确的信息");e.$axios.post(e.api+"/produce/create",e.addProduceForm).then(function(t){e.getOrderList()})}),this.addProduceVisible=!this.addProduceVisible},editOrder:function(e){this.editOrderVisible=!0,this.dialogDisable=!0,this.value=!1,this.editOrderForm=e,console.log(this.editOrderForm.status),2==this.editOrderForm.status?this.switchDisable=!0:(console.log("sss"),this.switchDisable=!1)},editOrderInfo:function(){var e=this;this.$axios.put(this.api+"/produce/update",this.editOrderForm).then(function(t){e.getOrderList()}),this.editOrderVisible=!1,this.dialogDisable=!1},auditOrder:function(e){var t=this;this.$axios.get(this.api+"/produce/confirm",{params:{id:e.id}}).then(function(e){t.getOrderList()})},produceProduce:function(e){var t=this;this.$axios.get(this.api+"/produce/produce",{params:{id:e.id}}).then(function(e){t.getOrderList()})}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("订单管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("订单列表")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:14}},[r("el-col",{attrs:{span:6}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getOrderList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getOrderList},slot:"append"})],1)],1),e._v(" "),r("el-col",{attrs:{span:3}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrderVisible=!e.addOrderVisible}}},[e._v("添加订单")])],1)],1),e._v(" "),r("el-table",{key:e.dataKey,staticStyle:{width:"100%"},attrs:{data:e.OrderList,height:"100%",border:""}},[r("el-table-column",{attrs:{type:"index",label:"编号",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"order_name.product_name",label:"产品",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"order_client",label:"客户"}}),e._v(" "),r("el-table-column",{attrs:{prop:"order_number",label:"数量"}}),e._v(" "),r("el-table-column",{attrs:{prop:"order_price",label:"单价"}}),e._v(" "),r("el-table-column",{attrs:{prop:"order_total_price",label:"总价"}}),e._v(" "),r("el-table-column",{attrs:{prop:"order_time",label:"订货时间"}}),e._v(" "),r("el-table-column",{attrs:{prop:"status",label:"状态"}}),e._v(" "),r("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.editOrder(t.row)}}})],1),e._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"确认",placement:"top"}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-s-claim",size:"mini"},on:{click:function(r){return e.auditOrder(t.row)}}})],1)]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":[1,10,20,50],"page-size":e.queryInfo.page_size,layout:"prev, pager, next, sizes, total",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange,"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)}}})],1),e._v(" "),r("el-dialog",{attrs:{title:"添加生产单",visible:e.addProduceVisible,width:"50%",align:"left"},on:{"update:visible":function(t){e.addProduceVisible=t}}},[r("el-form",{ref:"addProduceFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addProduceForm,rules:e.addProduceFormRul,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"产品",prop:"product_name"}},[r("el-select",{attrs:{clearable:"",placeholder:"选择产品"},model:{value:e.addProduceForm.product_name,callback:function(t){e.$set(e.addProduceForm,"product_name",t)},expression:"addProduceForm.product_name"}},e._l(e.productInfo,function(e){return r("el-option",{key:e.id,attrs:{label:e.product_name,value:e.product_name}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"今日产量",prop:"today_done_num"}},[r("el-input",{model:{value:e.addProduceForm.today_done_num,callback:function(t){e.$set(e.addProduceForm,"today_done_num",t)},expression:"addProduceForm.today_done_num"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"合格量",prop:"qualified_num"}},[r("el-input",{model:{value:e.addProduceForm.qualified_num,callback:function(t){e.$set(e.addProduceForm,"qualified_num",t)},expression:"addProduceForm.qualified_num"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单位",prop:"unit"}},[r("el-input",{model:{value:e.addProduceForm.unit,callback:function(t){e.$set(e.addProduceForm,"unit",t)},expression:"addProduceForm.unit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"员工",prop:"staff_name"}},[r("el-select",{attrs:{clearable:"",placeholder:"选择员工"},model:{value:e.addProduceForm.staff_name,callback:function(t){e.$set(e.addProduceForm,"staff_name",t)},expression:"addProduceForm.staff_name"}},e._l(e.userInfo,function(e){return r("el-option",{key:e.id,attrs:{label:e.username,value:e.username}})}),1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addProduceVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.addProduce}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改生产单",visible:e.editOrderVisible,width:"50%",align:"left"},on:{"update:visible":function(t){e.editOrderVisible=t}}},[r("span",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[r("el-switch",{attrs:{disabled:e.switchDisable},on:{change:e.changeEdit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),r("el-form",{ref:"addProduceFormRef",staticClass:"demo-ruleForm",attrs:{model:e.editOrderForm,rules:e.addProduceFormRul,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"产品",prop:"product_name"}},[r("el-select",{attrs:{clearable:"",placeholder:"选择产品",disabled:e.dialogDisable},model:{value:e.editOrderForm.product_name,callback:function(t){e.$set(e.editOrderForm,"product_name",t)},expression:"editOrderForm.product_name"}},e._l(e.productInfo,function(e){return r("el-option",{key:e.id,attrs:{label:e.product_name,value:e.product_name}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"今日产量",prop:"today_done_num"}},[r("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editOrderForm.today_done_num,callback:function(t){e.$set(e.editOrderForm,"today_done_num",t)},expression:"editOrderForm.today_done_num"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"合格量",prop:"qualified_num"}},[r("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editOrderForm.qualified_num,callback:function(t){e.$set(e.editOrderForm,"qualified_num",t)},expression:"editOrderForm.qualified_num"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单位",prop:"unit"}},[r("el-input",{attrs:{disabled:e.dialogDisable},model:{value:e.editOrderForm.unit,callback:function(t){e.$set(e.editOrderForm,"unit",t)},expression:"editOrderForm.unit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"员工",prop:"staff_name"}},[r("el-select",{attrs:{clearable:"",placeholder:"选择员工",disabled:e.dialogDisable},model:{value:e.editOrderForm.staff_name,callback:function(t){e.$set(e.editOrderForm,"staff_name",t)},expression:"editOrderForm.staff_name"}},e._l(e.userInfo,function(e){return r("el-option",{key:e.id,attrs:{label:e.username,value:e.username}})}),1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editOrderVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",disabled:e.dialogDisable},on:{click:e.editOrderInfo}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=r("VU/8")(a,i,!1,function(e){r("kUi8")},"data-v-1fdfcab8",null);t.default=o.exports},kUi8:function(e,t){}});
//# sourceMappingURL=8.601735bc5fbeb2907600.js.map