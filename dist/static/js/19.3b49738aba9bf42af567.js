webpackJsonp([19],{Ek6S:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={data:function(){return{dataKey:!1,queryInfo:{query:"",page:1,page_size:10},addRepairVisible:!1,editRepairVisible:!1,total:0,repairList:[{id:0,facility_id:{},baoxiu_staff_name:{},baoxiu_staff_tel:"",baoxiu_time:"",baoxiu_complementary:"",repair_staff_name:{},repair_time:""}],addRepairForm:{id:0,facility_id:0,baoxiu_staff_name:0,baoxiu_staff_tel:"",baoxiu_time:"",baoxiu_complementary:"",repair_staff_name:0,repair_time:""},editRepairForm:{id:0,facility_id:0,baoxiu_staff_name:0,baoxiu_staff_tel:"",baoxiu_time:"",baoxiu_complementary:"",repair_staff_name:0,repair_time:""},userInfo:[{id:0,username:""}],unitInfo:[{id:0,username:""}],addRepairFormRul:{facility_id:[{required:!0,message:"请输入故障设备",trigger:"blur"}],baoxiu_staff_name:[{required:!0,message:"请输入报修人",trigger:"blur"}],baoxiu_complementary:[{required:!0,message:"请输入报修描述",trigger:"blur"}],baoxiu_staff_tel:[{required:!0,message:"请输入联系方式",trigger:"blur"}],baoxiu_time:[{required:!0,message:"请输入报修时间",trigger:"blur"}],repair_staff_name:[{required:!0,message:"请输入维修人",trigger:"blur"}],repair_time:[{required:!0,message:"请输入维修时间",trigger:"blur"}]}}},mounted:function(){this.getRepairList(),this.getUserList(),this.getUnitList()},methods:{getRepairList:function(){var e=this;this.$axios.get(this.api+"/repair/list",{params:this.queryInfo}).then(function(a){console.log(a.data),e.repairList=a.data.list,e.total=a.data.pagination.total,e.dataKey=!e.dataKey})},getUserList:function(){var e=this;this.$axios.get(this.api+"/user/list",{params:{page_size:1e6}}).then(function(a){e.userInfo=a.data.list})},getUnitList:function(){var e=this;this.$axios.get(this.api+"/unit/list",{params:{page_size:1e6}}).then(function(a){console.log(a.data),e.unitInfo=a.data.list})},editRepair:function(e){this.editRepairForm=e,this.editRepairForm.facility_id=e.facility_id.id,this.editRepairForm.baoxiu_staff_name=e.baoxiu_staff_name.id,this.editRepairForm.repair_staff_name=e.repair_staff_name.id,this.editRepairVisible=!this.editRepairVisible},sizeChange:function(e){this.queryInfo.page_size=e,this.getRepairList()},currentChange:function(e){this.queryInfo.page=e,this.getRepairList()},addUnitInfo:function(){var e=this;this.$refs.addRepairFormRef.validate(function(a){if(!a)return alert("请输入正确的信息");e.$axios.post(e.api+"/repair/create",e.addRepairForm).then(function(a){e.getRepairList()})}),this.addRepairVisible=!this.addRepairVisible},editRepairInfo:function(){var e=this;this.$refs.addRepairFormRef.validate(function(a){if(!a)return alert("请输入正确的信息");e.$axios.put(e.api+"/repair/update",e.editRepairForm).then(function(a){e.getRepairList(),console.log(a)})}),this.editRepairVisible=!this.editRepairVisible}}},r={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),e._v(" "),t("el-breadcrumb-item",[e._v("资产管理")]),e._v(" "),t("el-breadcrumb-item",[e._v("设备维修")])],1),e._v(" "),t("el-card",[t("el-row",{attrs:{gutter:14}},[t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getRepairList},model:{value:e.queryInfo.query,callback:function(a){e.$set(e.queryInfo,"query",a)},expression:"queryInfo.query"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getRepairList},slot:"append"})],1)],1),e._v(" "),t("el-col",{attrs:{span:3}},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.addRepairVisible=!e.addRepairVisible}}},[e._v("维修记录")])],1)],1),e._v(" "),t("el-table",{key:e.dataKey,staticStyle:{width:"100%"},attrs:{data:e.repairList,height:"100%",border:""}},[t("el-table-column",{attrs:{type:"index",label:"编号",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"facility_id.facility_name",label:"故障设备",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"baoxiu_complementary",label:"报修描述"}}),e._v(" "),t("el-table-column",{attrs:{prop:"baoxiu_staff_name.username",label:"报修人"}}),e._v(" "),t("el-table-column",{attrs:{prop:"baoxiu_staff_tel",label:"联系方式"}}),e._v(" "),t("el-table-column",{attrs:{prop:"baoxiu_time",label:"报修时间"}}),e._v(" "),t("el-table-column",{attrs:{prop:"repair_staff_name.username",label:"维修人"}}),e._v(" "),t("el-table-column",{attrs:{prop:"repair_time",label:"维修时间"}}),e._v(" "),t("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑信息",placement:"top"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.editRepair(a.row)}}})],1)]}}])})],1),e._v(" "),t("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":[1,10,20,50],"page-size":e.queryInfo.page_size,layout:"prev, pager, next, sizes, total",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange,"update:currentPage":function(a){return e.$set(e.queryInfo,"page",a)},"update:current-page":function(a){return e.$set(e.queryInfo,"page",a)}}})],1),e._v(" "),t("el-dialog",{attrs:{title:"修改员工信息",visible:e.addRepairVisible,width:"50%",align:"left"},on:{"update:visible":function(a){e.addRepairVisible=a}}},[t("el-form",{ref:"addRepairFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addRepairForm,rules:e.addRepairFormRul,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"故障设备",prop:"facility_id"}},[t("el-select",{attrs:{placeholder:"选择用户"},model:{value:e.addRepairForm.facility_id,callback:function(a){e.$set(e.addRepairForm,"facility_id",a)},expression:"addRepairForm.facility_id"}},e._l(e.unitInfo,function(e){return t("el-option",{key:e.id,attrs:{label:e.facility_name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"报修人",prop:"baoxiu_staff_name"}},[t("el-select",{attrs:{placeholder:"选择用户"},model:{value:e.addRepairForm.baoxiu_staff_name,callback:function(a){e.$set(e.addRepairForm,"baoxiu_staff_name",a)},expression:"addRepairForm.baoxiu_staff_name"}},e._l(e.userInfo,function(e){return t("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"报修描述",prop:"baoxiu_complementary"}},[t("el-input",{model:{value:e.addRepairForm.baoxiu_complementary,callback:function(a){e.$set(e.addRepairForm,"baoxiu_complementary",a)},expression:"addRepairForm.baoxiu_complementary"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系方式",prop:"baoxiu_staff_tel"}},[t("el-input",{model:{value:e.addRepairForm.baoxiu_staff_tel,callback:function(a){e.$set(e.addRepairForm,"baoxiu_staff_tel",a)},expression:"addRepairForm.baoxiu_staff_tel"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"报修时间",prop:"baoxiu_time"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.addRepairForm.baoxiu_time,callback:function(a){e.$set(e.addRepairForm,"baoxiu_time",a)},expression:"addRepairForm.baoxiu_time"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"维修人",prop:"repair_staff_name"}},[t("el-select",{attrs:{placeholder:"选择用户"},model:{value:e.addRepairForm.repair_staff_name,callback:function(a){e.$set(e.addRepairForm,"repair_staff_name",a)},expression:"addRepairForm.repair_staff_name"}},e._l(e.userInfo,function(e){return t("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"维修时间",prop:"repair_time"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.addRepairForm.repair_time,callback:function(a){e.$set(e.addRepairForm,"repair_time",a)},expression:"addRepairForm.repair_time"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.addRepairVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.addUnitInfo}},[e._v("更新")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"修改员工信息",visible:e.editRepairVisible,width:"50%",align:"left"},on:{"update:visible":function(a){e.editRepairVisible=a}}},[t("el-form",{ref:"addRepairFormRef",staticClass:"demo-ruleForm",attrs:{model:e.editRepairForm,rules:e.addRepairFormRul,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"故障设备",prop:"facility_id"}},[t("el-select",{attrs:{placeholder:"选择用户"},model:{value:e.editRepairForm.facility_id,callback:function(a){e.$set(e.editRepairForm,"facility_id",a)},expression:"editRepairForm.facility_id"}},e._l(e.unitInfo,function(e){return t("el-option",{key:e.id,attrs:{label:e.facility_name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"报修人",prop:"baoxiu_staff_name"}},[t("el-select",{attrs:{placeholder:"选择用户"},model:{value:e.editRepairForm.baoxiu_staff_name,callback:function(a){e.$set(e.editRepairForm,"baoxiu_staff_name",a)},expression:"editRepairForm.baoxiu_staff_name"}},e._l(e.userInfo,function(e){return t("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"报修描述",prop:"baoxiu_complementary"}},[t("el-input",{model:{value:e.editRepairForm.baoxiu_complementary,callback:function(a){e.$set(e.editRepairForm,"baoxiu_complementary",a)},expression:"editRepairForm.baoxiu_complementary"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系方式",prop:"baoxiu_staff_tel"}},[t("el-input",{model:{value:e.editRepairForm.baoxiu_staff_tel,callback:function(a){e.$set(e.editRepairForm,"baoxiu_staff_tel",a)},expression:"editRepairForm.baoxiu_staff_tel"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"报修时间",prop:"baoxiu_time"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editRepairForm.baoxiu_time,callback:function(a){e.$set(e.editRepairForm,"baoxiu_time",a)},expression:"editRepairForm.baoxiu_time"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"维修人",prop:"repair_staff_name"}},[t("el-select",{attrs:{placeholder:"选择用户"},model:{value:e.editRepairForm.repair_staff_name,callback:function(a){e.$set(e.editRepairForm,"repair_staff_name",a)},expression:"editRepairForm.repair_staff_name"}},e._l(e.userInfo,function(e){return t("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"维修时间",prop:"repair_time"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editRepairForm.repair_time,callback:function(a){e.$set(e.editRepairForm,"repair_time",a)},expression:"editRepairForm.repair_time"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.editRepairVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.editRepairInfo}},[e._v("更新")])],1)],1)],1)},staticRenderFns:[]},l=t("VU/8")(i,r,!1,null,null,null);a.default=l.exports}});
//# sourceMappingURL=19.3b49738aba9bf42af567.js.map