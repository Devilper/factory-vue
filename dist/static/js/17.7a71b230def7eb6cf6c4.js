webpackJsonp([17],{WXIb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){var e=this;return{queryInfo:{user_name:"",page:1,page_size:10,start_time:"",end_time:""},value1:[],total:0,exportAttendanceVisible:!1,dataKey:!1,attendanceList:[{current_time:"",flag_leave:!1,flag_business:!1,start_time:"",end_time:"",supplement:"",id:1,staff_name:{username:""}}],title:"导入考勤    单",tips:["名字","日期","是必填项"],fields:{staff_name:"名字",flag_leave:"请假",flag_business:"出差",start_time:"上班时间",end_time:"下班时间",supplement:"额外",current_time:"日期"},rules:{staff_name:{type:"string",required:!0,message:"名字必填"},flag_business:[{validator:function(t,a,n){!0===a?!0===e.fields.flag_leave&&n(new Error("请假和出差不能同时为是")):n()},trigger:"blur"}],current_time:{required:!0,message:"日期必填"}},filepath:"../../static/attendance.xlsx",visible:!1}},methods:{get_attendance_list:function(){var e=this;null!==this.value1&&this.value1.length>0&&(this.queryInfo.start_time=this.value1[0],this.queryInfo.end_time=this.value1[1]),this.$axios.get(this.api+"/attendance/list",{params:this.queryInfo}).then(function(t){e.attendanceList=t.data.list,e.total=t.data.pagination.total,e.dataKey=!e.dataKey,console.log(t.data)})},requestFn:function(e){var t=this;console.log(e),this.$axios.post(this.api+"/attendance/create",{list:e}).then(function(e){t.get_attendance_list()})},handleCloseImport:function(){console.log("弹窗关闭了~")},handleFinishImport:function(){console.log("导入完毕了~")},handleOpen:function(){this.visible=!0},searchAttendance:function(){console.log("ssss"),this.get_attendance_list()},sizeChange:function(e){this.queryInfo.page_size=e,this.get_attendance_list()},currentChange:function(e){this.queryInfo.page=e,this.get_attendance_list()},formatter_flag_leave:function(e,t){return 1==e.flag_leave&&(e.flag_leave="是"),0==e.flag_leave&&(e.flag_leave="否"),e.flag_leave},formatter_flag_business:function(e,t){return 1==e.flag_business&&(e.flag_business="是"),0==e.flag_business&&(e.flag_business="否"),e.flag_business},pickerChangeFn:function(e){null===e&&(this.queryInfo.start_time="",this.queryInfo.end_time=""),console.log(this.queryInfo)},rfid:function(e,t){this.$router.push({path:"month"})}},mounted:function(){this.get_attendance_list()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("财务管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("考勤管理")])],1),e._v(" "),a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-date-picker",{attrs:{type:"monthrange","start-placeholder":"开始月份","end-placeholder":"结束月份",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",align:"left"},on:{change:e.pickerChangeFn},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.queryInfo.user_name,callback:function(t){e.$set(e.queryInfo,"user_name",t)},expression:"queryInfo.user_name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchAttendance},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("ele-import",{attrs:{fields:e.fields,filepath:e.filepath,rules:e.rules,tips:e.tips,title:e.title,visible:e.visible,requestFn:e.requestFn},on:{"update:visible":function(t){e.visible=t},close:e.handleCloseImport,finish:e.handleFinishImport}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleOpen}},[e._v("导入数据")])],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary"},on:{click:e.rfid}},[e._v("月度总结")])],1)],1),e._v(" "),a("el-table",{key:e.dataKey,staticStyle:{width:"100%"},attrs:{data:e.attendanceList,height:"100%",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"staff_name.username",label:"名字",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flag_leave",label:"请假",formatter:e.formatter_flag_leave}}),e._v(" "),a("el-table-column",{attrs:{prop:"flag_business",label:"出差",formatter:e.formatter_flag_business}}),e._v(" "),a("el-table-column",{attrs:{prop:"start_time",label:"上班时间"},scopedSlots:e._u([{key:"default",fn:function(t){return a("span",{},[e._v("\n                      "+e._s(e._f("format")(t.row.start_time))+"\n                    ")])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"end_time",label:"下班时间"},scopedSlots:e._u([{key:"default",fn:function(t){return a("span",{},[e._v("\n                      "+e._s(e._f("format")(t.row.end_time))+"\n                    ")])}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"current_time",label:"日期"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":[1,10,20,50],"page-size":e.queryInfo.page_size,layout:"prev, pager, next, sizes, total",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange,"update:currentPage":function(t){return e.$set(e.queryInfo,"page",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"page",t)}}})],1)],1)},staticRenderFns:[]},l=a("VU/8")(n,s,!1,null,null,null);t.default=l.exports}});
//# sourceMappingURL=17.7a71b230def7eb6cf6c4.js.map